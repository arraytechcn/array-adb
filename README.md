# MaixCAM Pro 夜间车辆识别系统

基于 MaixCAM Pro 的自适应远光灯（ADB）控制系统，用于夜间识别汽车和摩托车。

## 功能列表

### 1. YOLOv5 目标检测
- 模型路径：`/root/models/model_159818.mud`
- 置信度阈值：0.5
- IOU 阈值：0.45
- 检测目标：汽车、摩托车

### 2. 远光灯分区控制
- 画面水平分为 24 个区域
- 根据目标中心 X 坐标计算区域索引（0-23）
- 通过 UART 发送控制信号给 MCU
- 特殊信号：
  - `99`：无目标检测
  - `100`：目标过多（>3个）

### 3. 状态边框指示
| 边框颜色 | 状态说明 |
|---------|---------|
| 绿色 | 无目标检测 |
| 红色 | 正常检测（≤3个目标） |
| 白色 | 目标过多（>3个） |

### 4. 目标可视化
- 蓝色矩形框标记检测目标
- 红色填充区域标记目标下方 1/3（车灯位置）
- 显示置信度分数

### 5. 触摸屏交互
- 触摸屏幕中心区域（半径 50 像素）
- 切换蓝色内框显示状态
- 蓝色内框显示时启用图像保存功能

### 6. 图像保存
- 定期保存：每 18 帧保存一次到 `/root/images/`
- 文件命名：`YYYYMMDD_HHMMSS_随机数.jpg`

### 7. FPS 显示
- 实时计算并显示帧率
- 显示位置：画面左下角

### 8. 启动 Logo
- 启动时显示 Logo 3 秒
- Logo 路径：`/root/logo320.png`
- 带边缘检测效果

## 硬件配置

| 参数 | 值 |
|-----|---|
| 摄像头分辨率 | 540 x 360（原始 1080x720 缩放） |
| 串口设备 | `/dev/ttyS0` |
| 波特率 | 500000 |

## 控制逻辑

1. 连续 10 帧无检测后发送 `99` 信号
2. 目标位置变化超过 1 个区域才发送新信号
3. 目标数量超过 3 个时发送 `100` 信号

## 文件结构

```
maix/
├── adb-12-24.py          # 主程序
├── logo320.png           # 启动 Logo
└── README.md             # 本文档
```
